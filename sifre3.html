<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Pink Digital Clock Puzzle — 09:07 Exact</title>
<style>
  :root{
    --bg1:#ffe6f2; --bg2:#ffd5ea;
    --pink:#ff66b2; --pink2:#ff99c8; --neon:#ff80ab;
    --shadow:0 18px 50px rgba(0,0,0,.18);
    --fade-ms:900ms;
  }
  html,body{height:100%}
  body{
    margin:0; font-family:ui-sans-serif, system-ui, Arial, Helvetica, sans-serif;
    background: radial-gradient(1200px 800px at 50% 20%, var(--bg2), var(--bg1));
    color:#111; display:flex; align-items:center; justify-content:center;
    overflow:hidden; padding:20px;
  }
  .wrap{width:min(92vw, 720px); text-align:center}
  h1{
    margin:0 0 16px; font-size:clamp(18px, 2.8vw, 26px); font-weight:700;
    color:#c2185b; text-shadow:0 0 10px rgba(255,102,178,.25);
  }

  .clock-card{
    border-radius:24px; padding:26px 20px 20px;
    background:linear-gradient(145deg, #fff, #fff4fa);
    box-shadow:var(--shadow), inset 0 0 0 1px rgba(255,102,178,.2);
  }
  .digital{
    font-family: "Courier New", monospace;
    font-weight:700; letter-spacing:.06em;
    font-size: clamp(28px, 6vw, 48px);
    color:var(--pink); text-shadow:0 0 12px var(--neon), 0 0 24px var(--neon);
    margin-bottom:12px;
  }

  .face{
    position:relative; width:min(78vw, 440px); aspect-ratio:1/1; margin:0 auto 12px;
    border-radius:50%; background:#fff;
    box-shadow: inset 0 0 0 2px rgba(0,0,0,.06), inset 0 0 60px rgba(255,102,178,.15);
  }
  .ticks{position:absolute; inset:0}
  .tick{
    position:absolute; left:50%; top:6px; width:3px; height:14px; background:#222; opacity:.22;
    transform-origin:50% calc(50% + 190px);
  }
  .tick.big{height:20px; opacity:.38; width:4px}
  .center-dot{
    position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
    width:14px; height:14px; border-radius:50%; background:#111; box-shadow:0 0 0 4px #fff;
  }
  .hand{
    position:absolute; left:50%; top:50%; transform-origin:50% 90%;
    transform: translate(-50%,-90%) rotate(0deg);
    border-radius:12px; cursor:grab; user-select:none; touch-action:none;
    filter: drop-shadow(0 2px 2px rgba(0,0,0,.12));
  }
  .hand:active{cursor:grabbing}
  .hand.minute{width:6px; height:42%; background:#ff3f8f;}
  .hand.hour{width:8px; height:30%; background:#111;}
  .hand.cap{
    position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
    width:22px; height:22px; background:#ff3f8f; border-radius:50%;
    box-shadow:0 0 10px var(--neon);
  }

  .fade{
    position:fixed; inset:0; background:#000; opacity:0; pointer-events:none;
    transition:opacity var(--fade-ms) ease;
  }
  .fade.show{opacity:1}
  .letter-wrap{
    position:fixed; inset:0; display:none; align-items:center; justify-content:center;
    padding:24px;
  }
  .letter{
    width:min(92vw, 720px); background:#fffdf8; color:#222;
    border-radius:16px; box-shadow:0 30px 80px rgba(0,0,0,.35);
    border:1px solid rgba(0,0,0,.08);
    padding:28px 26px; line-height:1.6; font-size:clamp(14px, 2.2vw, 18px);
    position:relative;
  }
  .letter h2{margin:0 0 10px; color:#c2185b;}
  .btn-reset{
    margin-top:14px; background:#ff66b2; border:none; color:#fff; font-weight:700;
    padding:10px 14px; border-radius:10px; cursor:pointer;
  }
</style>
</head>
<body>
  <div class="wrap" id="app">
    <h1>Do you remember the time?</h1>

    <div class="clock-card">
      <div class="digital" id="digital">--:--</div>
      <div class="face" id="face">
        <div class="ticks" id="ticks"></div>
        <div class="hand hour" id="hourHand"></div>
        <div class="hand minute" id="minHand"></div>
        <div class="hand cap"></div>
        <div class="center-dot"></div>
      </div>
    </div>
  </div>

  <div class="fade" id="fade"></div>

  <div class="letter-wrap" id="letterWrap">
    <div class="letter">
      <h2>Letter</h2>
      <div id="letterText">
        Hello my love, it’s been …
      </div>
      <button class="btn-reset" id="againBtn">Reset puzzle</button>
    </div>
  </div>

<script>
const TARGET_HOUR   = 9;   // 09
const TARGET_MINUTE = 7;   // 07
const EXACT_MATCH   = true;

const ticksEl = document.getElementById('ticks');
for (let i=0;i<60;i++){
  const d=document.createElement('div');
  d.className='tick' + (i%5===0?' big':'');
  d.style.transform = `rotate(${i*6}deg) translate(-50%,0)`;
  ticksEl.appendChild(d);
}

let h=10, m=10, dragging=null, solved=false;
const face=document.getElementById('face');
const hourHand=document.getElementById('hourHand');
const minHand=document.getElementById('minHand');
const digital=document.getElementById('digital');
const fadeEl=document.getElementById('fade');
const letterW=document.getElementById('letterWrap');
const againBtn=document.getElementById('againBtn');

function pad2(n){return String(n).padStart(2,'0')}
function hourAngle(hr,min){return ((hr%12)*30)+(min*0.5)}
function minuteAngle(min){return min*6}

function setHands(hr,min,fromUser=false){
  h=(hr+24)%24; m=(min+60)%60;
  hourHand.style.transform=`translate(-50%,-90%) rotate(${hourAngle(h,m)}deg)`;
  minHand .style.transform=`translate(-50%,-90%) rotate(${minuteAngle(m)}deg)`;
  digital.textContent=`${pad2(h)}:${pad2(m)}`;
  if(fromUser) checkSolved();
}

function angleFromPoint(x,y,rect){
  const cx=rect.left+rect.width/2, cy=rect.top+rect.height/2;
  let deg=(Math.atan2(y-cy,x-cx)*180/Math.PI)+90;
  if(deg<0)deg+=360; return deg;
}

function onPointerMove(e){
  if(!dragging||solved)return;
  const rect=face.getBoundingClientRect();
  const deg=angleFromPoint(e.clientX,e.clientY,rect);
  if(dragging==='minute'){
    const newM=Math.round(deg/6)%60;
    setHands(h,newM,true);
  }else if(dragging==='hour'){
    const rawH=deg/30, nearest=Math.round(rawH)%12;
    const base=h>=12?12:0;
    setHands(base+nearest,m,true);
  }
}
function onPointerUp(){dragging=null;}

minHand.addEventListener('pointerdown',e=>{if(!solved){dragging='minute';e.preventDefault();}});
hourHand.addEventListener('pointerdown',e=>{if(!solved){dragging='hour';e.preventDefault();}});
window.addEventListener('pointermove',onPointerMove);
window.addEventListener('pointerup',onPointerUp);

function triggerSolved(){
  solved=true;
  setTimeout(()=>{
    fadeEl.classList.add('show');
    setTimeout(()=>{
      letterW.style.display='flex';
      letterW.setAttribute('aria-hidden','false');
    },900);
  },200);
}
function checkSolved(){
  if(solved) return;
  if(EXACT_MATCH){
    if((h%12)===(TARGET_HOUR%12)&&m===TARGET_MINUTE){
      triggerSolved();
    }
  }
}

againBtn.addEventListener('click',()=>{
  solved=false; fadeEl.classList.remove('show'); letterW.style.display='none';
});
setHands(10,10,false);
</script>
</body>
</html>
